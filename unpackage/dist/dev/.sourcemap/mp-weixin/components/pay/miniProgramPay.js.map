{"version":3,"sources":["webpack:///C:/Users/wutongyue/Documents/HBuilderProjects/no/components/pay/miniProgramPay.vue?382a","webpack:///C:/Users/wutongyue/Documents/HBuilderProjects/no/components/pay/miniProgramPay.vue?e40b","webpack:///C:/Users/wutongyue/Documents/HBuilderProjects/no/components/pay/miniProgramPay.vue?f7b9","webpack:///C:/Users/wutongyue/Documents/HBuilderProjects/no/components/pay/miniProgramPay.vue?a22a","webpack:///C:/Users/wutongyue/Documents/HBuilderProjects/no/components/pay/miniProgramPay.vue","webpack:///C:/Users/wutongyue/Documents/HBuilderProjects/no/components/pay/miniProgramPay.vue?9981","webpack:///C:/Users/wutongyue/Documents/HBuilderProjects/no/components/pay/miniProgramPay.vue?5d62"],"names":["data","title","loading","price","providerList","name","mounted","uni","getProvider","service","success","e","provider","map","value","push","id","console","log","fail","methods","requestPayment","index","getCode","code","getOrderInfo","orderInfo","msg","showModal","content","showCancel","JSON","stringify","isString","oi","timeStamp","showToast","errMsg","complete","payId","$store","dispatch","then","res","err","Promise","resolve","login","priceChange","detail"],"mappings":"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","file":"components/pay/miniProgramPay.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./miniProgramPay.vue?vue&type=template&id=138b323b&\"\nvar renderjs\nimport script from \"./miniProgramPay.vue?vue&type=script&lang=js&\"\nexport * from \"./miniProgramPay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./miniProgramPay.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('138b323b')) {\n      api.createRecord('138b323b', component.options)\n    } else {\n      api.reload('138b323b', component.options)\n    }\n    module.hot.accept(\"./miniProgramPay.vue?vue&type=template&id=138b323b&\", function () {\n      api.rerender('138b323b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/wutongyue/Documents/HBuilderProjects/no/components/pay/miniProgramPay.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./miniProgramPay.vue?vue&type=template&id=138b323b&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./miniProgramPay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./miniProgramPay.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    export default {\n        data() {\n            return {\n                title: 'request-payment',\n                loading: false,\n                price: 1,\n                providerList: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname:'支付类型'\n\t\t\t\t\t}\n\t\t\t\t]\n            }\n        },\n        mounted() {\n            uni.getProvider({\n                service: \"payment\",\n                success: (e) => {\n                    let providerList = [];\n                    e.provider.map((value) => {\n                        switch (value) {\n                            case 'alipay':\n                                providerList.push({\n                                    name: '支付宝小程序',\n                                    id: value,\n                                    loading: false\n                                });\n                                break;\n                            case 'wxpay':\n                                providerList.push({\n                                    name: '微信小程序',\n                                    id: value,\n                                    loading: false\n                                });\n                                break;\n                            default:\n                                break;\n                        }\n                    })\n\t\t\t\t\t\n                    this.providerList = providerList;\n\t\t\t\t\tconsole.log(this.providerList)\n                },\n                fail: (e) => {\n                    console.log(\"获取支付通道失败：\", e);\n                }\n            });\n        },\n        methods: {\n            async requestPayment(e, index) {\n                this.providerList[index].loading = true;\n\t\t\t\tlet code = await this.getCode();\n                let orderInfo = await this.getOrderInfo(e.id,code);\n\t\t\t\tconsole.log(orderInfo);\n                console.log(\"得到订单信息\", orderInfo);\n                if (orderInfo.msg !== 'success') {\n                    console.log(\"获得订单信息失败\", orderInfo);\n                    uni.showModal({\n                        content: \"获得订单信息失败\",\n                        showCancel: false\n                    })\n\t\t\t\t\tthis.providerList[index].loading = false;\n                    return;\n                }\n\t\t\t\tconsole.log(JSON.stringify(orderInfo.data))\n\t\t\t\tlet isString = typeof(orderInfo.data);\n\t\t\t\tlet oi = isString == \"string\" ? orderInfo.data : JSON.stringify(orderInfo.data);\n                uni.requestPayment({\n                    provider: e.id,\n\t\t\t\t\torderInfo: oi,\n\t\t\t\t\ttimeStamp:\"\",\n\t\t\t\t\tsuccess: (e) => {\n                        console.log(\"success\", e);\n                        uni.showToast({\n                            title: \"感谢您的赞助!\"\n                        })\n                    },\n                    fail: (e) => {\n                        console.log(\"fail\", e);\n                        uni.showModal({\n                            content: \"支付失败,原因为: \" + e.errMsg,\n                            showCancel: false\n                        })\n                    },\n                    complete: () => {\n                        this.providerList[index].loading = false;\n                    }\n                })\n            },\n            getOrderInfo(payId,code) {\n\t\t\t\tif(payId == 'alipay'){\n\t\t\t\t\t return this.$store.dispatch(\"ALIAPPAY\",{\n\t\t\t\t\t\t\t\t\"orderNo\":\"120200105000065509\",\n\t\t\t\t\t\t\t\t\"amount\":0.5,\n\t\t\t\t\t\t\t\t\"body\":\"very good!\"\n\t\t\t\t\t\t\t}).then(res=>{\n\t\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif(payId == 'wxpay'){\n\t\t\t\t\t return this.$store.dispatch(\"WXMINIPAY\",{\n\t\t\t\t\t\t\t\t\"orderNo\":\"120200105000065509\",\n\t\t\t\t\t\t\t\t\"amount\":0.5,\n\t\t\t\t\t\t\t\t\"body\":\"very good!\",\n\t\t\t\t\t\t\t\t\"code\":code\n\t\t\t\t\t\t\t}).then(res=>{\n\t\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\treturn {\n\t\t\t\t\t\terr:'err'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n            },\n\t\t\tgetCode(){\n\t\t\t\treturn new Promise(resolve=>{\n\t\t\t\t\tuni.login({\n\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\tsuccess(res){\n\t\t\t\t\t\t\tresolve(res.code);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t\n\t\t\t},\n            priceChange(e) {\n                console.log(e.detail.value)\n                this.price = e.detail.value;\n            }\n        }\n    }\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./miniProgramPay.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./miniProgramPay.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}